<p id="notice"><%= notice %></p>

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Batch</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./batch.css" />
  </head>
  <body>
    <div class="title">
      <p>롤체지지</p>
    </div>
    <div class="menu_bar">
      <ul class="nav">
        <li class="nav-item">
          <a class="nav-link" href="#">배치툴</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">유튜버가이드</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">커뮤니티</a>
        </li>
      </ul>
    </div>
    <div style="text-align: center">
      <img src="lol_logo.png" alt="" width="200" />
    </div>
	<h1>배치툴</h1>
    <div class="container">
      <div class="champhion-slot1">
        <div class="cs1 1"><%= if @tool_lists.size > 0 
								image_tag(Character.find(@tool_lists[0].character_id).avatar.url)
								end
							%></div>
        <div class="cs1 2"><%= if @tool_lists.size > 1
								image_tag(Character.find(@tool_lists[1].character_id).avatar.url)
								end
							%></div>
        <div class="cs1 3"><%= if @tool_lists.size > 2 
								image_tag(Character.find(@tool_lists[2].character_id).avatar.url)
								end
							%></div>
        <div class="cs1 4"><%= if @tool_lists.size > 3 
								image_tag(Character.find(@tool_lists[3].character_id).avatar.url)
								end
							%></div>
        <div class="cs1 5"><%= if @tool_lists.size > 4 
								image_tag(Character.find(@tool_lists[4].character_id).avatar.url)
								end
							%></div>
        <div class="cs1 6"><%= if @tool_lists.size > 5 
								image_tag(Character.find(@tool_lists[5].character_id).avatar.url)
								end
							%></div>
        <div class="cs1 7"><%= if @tool_lists.size > 6 
								image_tag(Character.find(@tool_lists[6].character_id).avatar.url)
								end
							%></div>
      </div>
      <div class="champhion-slot2">
        <div class="cs2 1"><%= if @tool_lists.size > 7 
								image_tag(Character.find(@tool_lists[7].character_id).avatar.url)
								end
							%></div>
        <div class="cs2 2"><%= if @tool_lists.size > 8 
								image_tag(Character.find(@tool_lists[8].character_id).avatar.url)
								end
							%></div>
        <div class="cs2 3"><%= if @tool_lists.size > 9 
								image_tag(Character.find(@tool_lists[9].character_id).avatar.url)
								end
							%></div>
        <div class="cs2 4"></div>
        <div class="cs2 5"></div>
        <div class="cs2 6"></div>
        <div class="cs2 7"></div>
      </div>
      <div class="champhion-slot3">
        <div class="cs3 1"></div>
        <div class="cs3 2"></div>
        <div class="cs3 3"></div>
        <div class="cs3 4"></div>
        <div class="cs3 5"></div>
        <div class="cs3 6"></div>
        <div class="cs3 7"></div>
      </div>
	  <div class="champhion-slot4">
        <div class="cs3 1"></div>
        <div class="cs3 2"></div>
        <div class="cs3 3"></div>
        <div class="cs3 4"></div>
        <div class="cs3 5"></div>
        <div class="cs3 6"></div>
        <div class="cs3 7"></div>
      </div>
    </div>
	
	<div class="c_container">
		
			<h2>시너지</h2>
			적용 시너지 : <% @tool_synergy.each do |s| %>
			  <tr>
				<td><%= s %></td>
			  </tr>
			<% end %>
			<br/>

			<% @synergies.each do |synergy| %>
				<% if synergy.s_count > 0 %>
					<%= synergy.s_name %>
					<%= synergy.s_count %>
				<% end %>
			<% end %>

			<table>
			  <thead>
				<tr>
				  <th>Character</th>
				  <th colspan="3"></th>
				</tr>
			  </thead>

			  <tbody>
				<% @tool_lists.each do |tool| %>
				  <tr>
					<td><%= Character.find(tool.character_id).name %></td>
					<td><%= image_tag(Character.find(tool.character_id).avatar.url) %></td>
					<td><%= link_to 'Destroy', tool, method: :delete, data: { confirm: 'Are you sure?' } %></td>
				  </tr>
				<% end %>
			  </tbody>
			</table>

			<br>


			<h1>캐릭터</h1>

			<table id='inventory' class='width ="1500" height="1000" align = "center"'>
			  <thead>
				<tr>
				  <th onclick='sortTable(0)'>이름 순</th>
				  <th onclick='sortTable(1)'>가격 순</th>
				  <th onclick='sortTable(2)'>시너지 별</th>
				  <th colspan="3"></th>
				</tr>
			  </thead>		
			  <tbody>
				<% @characters.each do |character| %>
				  <tr>
					<td class="c_name"><%= character.name %></td>
					<td class="c_cost"><%= character.cost %></td>
					<td><%= image_tag(character.avatar.url) %></td>
					<td><%= button_to "툴에 넣기", tools_path(tool: { character_id: character.id}) %></td>
				  </tr>
				<% end %>
			  </tbody>
			</table>

			<br>

			<%= link_to 'New Character', new_character_path %>

			<h1>Synergies</h1>

			<table>
			  <thead>
				<tr>
				  <th>S name</th>
				  <th colspan="3"></th>
				</tr>
			  </thead>

			  <tbody>
				<% @synergies.each do |synergy| %>
				  <tr>
					<td><%= synergy.s_name %></td>
					<td><%= link_to 'Show', synergy %></td>
					<td><%= link_to 'Edit', edit_synergy_path(synergy) %></td>
					<td><%= link_to 'Destroy', synergy, method: :delete, data: { confirm: 'Are you sure?' } %></td>
				  </tr>
				<% end %>
			  </tbody>
			</table>

			<br>

			<%= link_to 'New Synergy', new_synergy_path %>
	</div>
	
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>
  </body>
</html>









<script>
	function gotool(c){
		console.log(c)
	}
	
	function sortTable(n) {
		var table, rows, switching, o, x, y, shouldSwitch, dir, switchcount = 0;
			table = document.getElementById("inventory");
			switching = true;
			dir = 'asc';

		while (switching) {
			switching = false;
			rows = table.getElementsByTagName('TR');

			for (o = 1; o < (rows.length - 1); o++){
				shouldSwitch = false;
				x = rows[o].getElementsByTagName('TD')[n];
				y = rows[o+1].getElementsByTagName('TD')[n];

				if (dir == 'asc') {
					if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
						shouldSwitch = true;
						break;
					}
				}else if (dir == 'desc'){
					if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
						shouldSwitch = true;
						break;
					}
				}
			}

			if (shouldSwitch) {
				rows[o].parentNode.insertBefore(rows[o+1], rows[o]);
				switching = true;
				switchcount ++;
			}else {
				if (switchcount == 0 && dir == 'asc') {
					dir = 'desc';
					switching = true;
				}
			}
		}
	}
</script>